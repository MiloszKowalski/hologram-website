---
interface Props {
  imgSrc: string;
  name: string;
  description: string;
  left?: string;
}

const { name, imgSrc, description, left } = Astro.props;

const nameWithoutSpaces = name.replaceAll("\n", "");
---

<script>
  import SplitText from "gsap/SplitText";
  import { isMobile } from "react-device-detect";
  import { gsap } from "gsap"

  setTimeout(() => {
    const bioText = document.querySelectorAll("div[id*='bio-text-']");

    for (const text of bioText) {
      const nameWithoutSpaces = text.id.replace("bio-text-", "");

      SplitText.create(`#bio-text-${nameWithoutSpaces}`, {
        type: "lines",
        autoSplit: true,
        mask: "lines",
        aria: "none",
        linesClass: "bio-line",
        onSplit: (self) => {
          return gsap.from(self.lines, {
            y: 100,
            opacity: 0,
            stagger: 0.1,
            duration: 0.75,
            scrollTrigger: {
              trigger: `#bio-${nameWithoutSpaces}`,
              start: isMobile ? "top center" : "top-=600",
              end: isMobile ? "bottom center+=200" : "top-=200",
              scrub: 1.25,
              //markers: true,
              pin: false,
            },
          });
        },
      });
    }
  }, 250)
</script>

<article
  id={`bio-${nameWithoutSpaces}`}
  class="md:w-[45ch] flex flex-col items-center p-8"
>
  <img class="rounded-full w-3/5" src={imgSrc} alt="" loading="lazy" />
  <h2
    class={`text-white text-2xl font-[Aktiv_Grotesk_Ex] font-extrabold whitespace-pre-line relative -top-8 ${
      !left && "-left-8"
    } md:right-10 ${left}`}
  >
    {name}
  </h2>
  <div id={`bio-text-${nameWithoutSpaces}`} class="relative md:left-8">
    <p
      class="font-[Chivo_Mono] text-white md:w-[35ch] whitespace-pre-line text-sm text-justify"
    >
      {description}
    </p>
  </div>
</article>
